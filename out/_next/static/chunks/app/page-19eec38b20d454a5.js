(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8167:function(t,e,a){Promise.resolve().then(a.bind(a,3643))},3643:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return Q}});var i=a(7437),r=a(2265),n=a(703),l=t=>{let{onNewQuiz:e,onJoinQuiz:a}=t;return(0,i.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"w-full max-w-2xl text-center",children:[(0,i.jsx)("div",{className:"relative w-full h-48 mb-8",children:(0,i.jsx)(n.default,{src:"/quiz/quiz-clash.webp",alt:"Quiz Clash",fill:!0,className:"object-contain",priority:!0})}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("button",{onClick:e,className:"w-full bg-[#0F3856] hover:bg-[#0a2a3f] text-white font-bold py-3 px-8 rounded-lg text-lg transition-colors duration-200 shadow-lg hover:shadow-[#0F3856]/25",children:"New Quiz"}),(0,i.jsx)("button",{onClick:a,className:"w-full bg-[#0F3856] hover:bg-[#0a2a3f] text-white font-bold py-3 px-8 rounded-lg text-lg transition-colors duration-200 shadow-lg hover:shadow-[#0F3856]/25",children:"Join Quiz"})]})]})})},s=a(8121),o=a(6142),c=a(7065);let d=(0,o.ZF)({apiKey:"AIzaSyD_0HVKDwCfz571Xw74lIpZCAIybqimesU",authDomain:"quiz-adc97.firebaseapp.com",projectId:"quiz-adc97",storageBucket:"quiz-adc97.firebasestorage.app",messagingSenderId:"250590029942",appId:"1:250590029942:web:52d099af4d510203175757"}),x=(0,s.ad)(d),u=(0,c.v0)(d),h=()=>{let t=["happy","clever","quick","brave","wise","funny","smart","cool"],e=["quiz","game","test","challenge","match","battle","duel","race"],a=Math.floor(1e3*Math.random()).toString().padStart(3,"0"),i=t[Math.floor(Math.random()*t.length)],r=e[Math.floor(Math.random()*e.length)];return"".concat(i,"-").concat(r,"-").concat(a)},m=async t=>{let e=u.currentUser;if(!e)throw Error("User must be authenticated to create a quiz");let a=h(),i=(0,s.JU)(x,"quizzes",a),r={questions:t,createdAt:(0,s.Bt)(),isActive:!0,createdBy:e.uid,participants:{}};return await (0,s.pl)(i,r),a},_=async t=>{let e=(0,s.JU)(x,"quizzes",t),a=await (0,s.QT)(e);return a.exists()?{id:a.id,...a.data()}:null},w=async(t,e)=>{let a=u.currentUser;if(!a)throw Error("User must be authenticated to join a quiz");let i=(0,s.JU)(x,"quizzes",t),r=await (0,s.QT)(i);return!!r.exists()&&!r.data().participants[a.uid]&&(await (0,s.r7)(i,{["participants.".concat(a.uid)]:{nickname:e,score:0,joinedAt:(0,s.Bt)()}}),!0)},b=async(t,e)=>{let a=u.currentUser;if(!a)throw Error("User must be authenticated to submit a score");let i=(0,s.JU)(x,"quizzes",t);await (0,s.r7)(i,{["participants.".concat(a.uid,".score")]:e,["participants.".concat(a.uid,".completedAt")]:(0,s.Bt)()})},f=async t=>{let e=(0,s.JU)(x,"quizzes",t),a=await (0,s.QT)(e);return a.exists()?Object.entries(a.data().participants).map(t=>{let[e,a]=t;return{nickname:a.nickname,score:a.score}}).sort((t,e)=>e.score-t.score):[]};var p=t=>{let{onJoinQuiz:e,onBack:a}=t,[n,l]=(0,r.useState)(""),[s,o]=(0,r.useState)(""),c=async t=>{if(t.preventDefault(),o(""),!n.trim()){o("Please enter a quiz ID");return}try{let t=await _(n);if(!t){o("Quiz not found");return}if(!t.isActive){o("This quiz is no longer active");return}e(n)}catch(t){o("Failed to join quiz. Please try again."),console.error("Error joining quiz:",t)}};return(0,i.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"w-full max-w-md",children:[(0,i.jsx)("h2",{className:"text-3xl font-bold mb-8 text-center text-white",children:"Join Quiz"}),(0,i.jsxs)("form",{onSubmit:c,className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"quizId",className:"block text-white text-lg font-medium mb-2",children:"Enter Quiz ID"}),(0,i.jsx)("input",{id:"quizId",type:"text",value:n,onChange:t=>l(t.target.value),className:"w-full px-4 py-2 rounded-lg bg-white/10 text-white border border-white/20 focus:border-blue-500 focus:outline-none",placeholder:"Quiz ID"}),s&&(0,i.jsx)("p",{className:"mt-2 text-red-400 text-sm",children:s})]}),(0,i.jsxs)("div",{className:"flex space-x-4",children:[(0,i.jsx)("button",{type:"button",onClick:a,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Back"}),(0,i.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Join"})]})]})]})})};let g="quiz_last_nickname",y=()=>localStorage.getItem(g),v=t=>{localStorage.setItem(g,t)};var q=t=>{let{onSubmit:e,onBack:a}=t,[n,l]=(0,r.useState)(""),[s,o]=(0,r.useState)("");return(0,r.useEffect)(()=>{let t=y();t&&l(t)},[]),(0,i.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"w-full max-w-md",children:[(0,i.jsx)("h2",{className:"text-3xl font-bold mb-8 text-center text-white",children:"Enter Nickname"}),(0,i.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),!n.trim()){o("Please enter a nickname");return}v(n),e(n)},className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"nickname",className:"block text-white text-lg font-medium mb-2",children:"Your Nickname"}),(0,i.jsx)("input",{id:"nickname",type:"text",value:n,onChange:t=>l(t.target.value),className:"w-full px-4 py-2 rounded-lg bg-white/10 text-white border border-white/20 focus:border-blue-500 focus:outline-none",placeholder:"Enter your nickname"}),s&&(0,i.jsx)("p",{className:"mt-2 text-red-400 text-sm",children:s})]}),(0,i.jsxs)("div",{className:"flex space-x-4",children:[(0,i.jsx)("button",{type:"button",onClick:a,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Back"}),(0,i.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Continue"})]})]})]})})},j=t=>{let{timeLimit:e,onTimeout:a,onTimeUpdate:n}=t,[l,s]=(0,r.useState)(e);return(0,r.useEffect)(()=>{s(e)},[e]),(0,r.useEffect)(()=>{let t;return t=setInterval(()=>{s(t=>{if(t<=1)return a(),0;let e=t-1;return null==n||n(e),e})},1e3),()=>{t&&clearInterval(t)}},[a,n]),(0,i.jsx)("div",{className:"text-center mb-4",children:(0,i.jsxs)("div",{className:"text-2xl font-bold text-white",children:["Time: ",l,"s"]})})},N=t=>{let{question:e,onAnswer:a,currentQuestionNumber:n,totalQuestions:l,showEmoji:s,timeLimit:o}=t,[c,d]=(0,r.useState)(null),[x,u]=(0,r.useState)(Date.now()),[h,m]=(0,r.useState)(!1);(0,r.useEffect)(()=>{d(null),m(!1),u(Date.now())},[n]);let _=t=>{if(c)return;let e=(Date.now()-x)/1e3;d(t),a(t,e)};return(0,i.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"w-full max-w-2xl text-center",children:[!c&&!h&&(0,i.jsx)(j,{timeLimit:o,onTimeout:()=>{c||h||(m(!0),a("",o))}},n),(0,i.jsxs)("h2",{className:"text-2xl font-bold mb-4 text-white",children:["Question ",n," of ",l]}),(0,i.jsx)("p",{className:"text-xl mb-8 text-white",children:e.text}),(0,i.jsx)("div",{className:"grid grid-cols-1 gap-4",children:e.alternatives.map(t=>(0,i.jsx)("button",{onClick:()=>_(t.id),disabled:null!==c||h,className:"p-4 rounded-lg text-white text-lg font-semibold transition-all\n                ".concat(null!==c||h?t.id===e.correctAnswerId?"bg-green-600":c===t.id?"bg-red-600":"bg-blue-600 opacity-50":"bg-blue-600 hover:bg-blue-700"),children:t.text},t.id))})]})})},I=t=>{let{quizId:e,score:a,totalQuestions:n,onReturnHome:l,questionScores:s,currentNickname:o}=t,[c,d]=(0,r.useState)([]);(0,r.useEffect)(()=>{(async()=>{try{let t=await f(e);d(t)}catch(t){console.error("Failed to load leaderboard:",t)}})()},[e]);let x=s.filter(t=>t.accuracy>0).length,u=s.reduce((t,e)=>t+e.timeBonus,0);return(0,i.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"w-full max-w-2xl text-center",children:[(0,i.jsx)("h2",{className:"text-3xl font-bold mb-8 text-white",children:"Quiz Complete!"}),(0,i.jsxs)("div",{className:"bg-white/10 rounded-lg p-6 mb-8",children:[(0,i.jsxs)("div",{className:"text-4xl font-bold mb-4 text-white",children:[a," points"]}),(0,i.jsxs)("div",{className:"text-xl text-white mb-2",children:[x," out of ",n," correct"]}),(0,i.jsxs)("div",{className:"text-xl text-white mb-6",children:[u," points in time bonus"]}),(0,i.jsxs)("div",{className:"mt-8",children:[(0,i.jsx)("h3",{className:"text-2xl font-bold mb-4 text-white",children:"Leaderboard"}),(0,i.jsx)("div",{className:"space-y-2",children:c.map((t,e)=>(0,i.jsxs)("div",{className:"flex justify-between items-center p-3 rounded-lg ".concat(t.nickname===o?"bg-blue-500/30 border-2 border-blue-400":"bg-white/5"),children:[(0,i.jsxs)("span",{className:"text-white",children:[e+1,". ",t.nickname]}),(0,i.jsxs)("span",{className:"text-white font-bold",children:[t.score," points"]})]},t.nickname))})]})]}),(0,i.jsx)("button",{onClick:l,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg text-lg transition-colors",children:"Play Again"}),(0,i.jsxs)("div",{className:"mt-8 p-4 bg-white/10 rounded-lg",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Share this quiz with friends:"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-white/60 text-sm mb-1",children:"Quiz ID:"}),(0,i.jsx)("div",{className:"text-2xl font-bold text-white bg-white/20 p-3 rounded-lg text-center",children:e})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-white/60 text-sm mb-1",children:"Or share this link:"}),(0,i.jsxs)("div",{className:"text-lg text-blue-400 bg-white/20 p-3 rounded-lg text-center cursor-pointer hover:bg-white/30 transition-colors",onClick:()=>{let t="".concat(window.location.origin,"/?join=").concat(e);navigator.clipboard.writeText(t)},children:[window.location.origin,"/?join=",e]}),(0,i.jsx)("p",{className:"text-white/60 text-xs mt-1 text-center",children:"Click to copy"})]})]})]})]})})},S=JSON.parse('{"X":[{"id":"q1","text":"What is the capital of France?","alternatives":[{"id":"alt_0","text":"Paris"},{"id":"alt_1","text":"Berlin"},{"id":"alt_2","text":"Rome"},{"id":"alt_3","text":"Madrid"}],"correctAnswerId":"alt_0"},{"id":"q2","text":"Who wrote \'Romeo and Juliet\'?","alternatives":[{"id":"alt_0","text":"William Shakespeare"},{"id":"alt_1","text":"Leo Tolstoy"},{"id":"alt_2","text":"Mark Twain"},{"id":"alt_3","text":"Charles Dickens"}],"correctAnswerId":"alt_0"},{"id":"q3","text":"What is the largest planet in our solar system?","alternatives":[{"id":"alt_0","text":"Mars"},{"id":"alt_1","text":"Earth"},{"id":"alt_2","text":"Jupiter"},{"id":"alt_3","text":"Venus"}],"correctAnswerId":"alt_2"},{"id":"q4","text":"Which element has the chemical symbol \'O\'?","alternatives":[{"id":"alt_0","text":"Oxygen"},{"id":"alt_1","text":"Gold"},{"id":"alt_2","text":"Silver"},{"id":"alt_3","text":"Hydrogen"}],"correctAnswerId":"alt_0"},{"id":"q5","text":"In what year did the Titanic sink?","alternatives":[{"id":"alt_0","text":"1912"},{"id":"alt_1","text":"1923"},{"id":"alt_2","text":"1905"},{"id":"alt_3","text":"1898"}],"correctAnswerId":"alt_0"},{"id":"q6","text":"Which country hosted the 2016 Summer Olympics?","alternatives":[{"id":"alt_0","text":"Brazil"},{"id":"alt_1","text":"China"},{"id":"alt_2","text":"UK"},{"id":"alt_3","text":"Russia"}],"correctAnswerId":"alt_0"},{"id":"q7","text":"What is the hardest natural substance on Earth?","alternatives":[{"id":"alt_0","text":"Diamond"},{"id":"alt_1","text":"Gold"},{"id":"alt_2","text":"Iron"},{"id":"alt_3","text":"Granite"}],"correctAnswerId":"alt_0"},{"id":"q8","text":"Who painted the Mona Lisa?","alternatives":[{"id":"alt_0","text":"Leonardo da Vinci"},{"id":"alt_1","text":"Pablo Picasso"},{"id":"alt_2","text":"Vincent van Gogh"},{"id":"alt_3","text":"Claude Monet"}],"correctAnswerId":"alt_0"},{"id":"q9","text":"What is the smallest prime number?","alternatives":[{"id":"alt_0","text":"2"},{"id":"alt_1","text":"1"},{"id":"alt_2","text":"3"},{"id":"alt_3","text":"5"}],"correctAnswerId":"alt_0"},{"id":"q10","text":"What is the capital city of Australia?","alternatives":[{"id":"alt_0","text":"Canberra"},{"id":"alt_1","text":"Sydney"},{"id":"alt_2","text":"Melbourne"},{"id":"alt_3","text":"Perth"}],"correctAnswerId":"alt_0"},{"id":"q11","text":"What is the boiling point of water in Celsius?","alternatives":[{"id":"alt_0","text":"100\xb0C"},{"id":"alt_1","text":"90\xb0C"},{"id":"alt_2","text":"80\xb0C"},{"id":"alt_3","text":"120\xb0C"}],"correctAnswerId":"alt_0"},{"id":"q12","text":"Which planet is known as the Red Planet?","alternatives":[{"id":"alt_0","text":"Mars"},{"id":"alt_1","text":"Venus"},{"id":"alt_2","text":"Mercury"},{"id":"alt_3","text":"Jupiter"}],"correctAnswerId":"alt_0"},{"id":"q13","text":"Who invented the telephone?","alternatives":[{"id":"alt_0","text":"Alexander Graham Bell"},{"id":"alt_1","text":"Thomas Edison"},{"id":"alt_2","text":"Nikola Tesla"},{"id":"alt_3","text":"Guglielmo Marconi"}],"correctAnswerId":"alt_0"},{"id":"q14","text":"What is the chemical formula for water?","alternatives":[{"id":"alt_0","text":"H2O"},{"id":"alt_1","text":"CO2"},{"id":"alt_2","text":"O2"},{"id":"alt_3","text":"NaCl"}],"correctAnswerId":"alt_0"},{"id":"q15","text":"What is the largest mammal?","alternatives":[{"id":"alt_0","text":"Blue Whale"},{"id":"alt_1","text":"Elephant"},{"id":"alt_2","text":"Giraffe"},{"id":"alt_3","text":"Hippopotamus"}],"correctAnswerId":"alt_0"},{"id":"q16","text":"What is the main gas found in the air we breathe?","alternatives":[{"id":"alt_0","text":"Nitrogen"},{"id":"alt_1","text":"Oxygen"},{"id":"alt_2","text":"Carbon Dioxide"},{"id":"alt_3","text":"Hydrogen"}],"correctAnswerId":"alt_0"},{"id":"q17","text":"Which country gifted the Statue of Liberty to the USA?","alternatives":[{"id":"alt_0","text":"France"},{"id":"alt_1","text":"UK"},{"id":"alt_2","text":"Germany"},{"id":"alt_3","text":"Spain"}],"correctAnswerId":"alt_0"},{"id":"q18","text":"How many continents are there?","alternatives":[{"id":"alt_0","text":"7"},{"id":"alt_1","text":"5"},{"id":"alt_2","text":"6"},{"id":"alt_3","text":"8"}],"correctAnswerId":"alt_0"},{"id":"q19","text":"What is the currency of Japan?","alternatives":[{"id":"alt_0","text":"Yen"},{"id":"alt_1","text":"Won"},{"id":"alt_2","text":"Dollar"},{"id":"alt_3","text":"Euro"}],"correctAnswerId":"alt_0"},{"id":"q20","text":"Who is the author of \'Harry Potter\'?","alternatives":[{"id":"alt_0","text":"J.K. Rowling"},{"id":"alt_1","text":"J.R.R. Tolkien"},{"id":"alt_2","text":"Stephen King"},{"id":"alt_3","text":"George R.R. Martin"}],"correctAnswerId":"alt_0"},{"id":"q21","text":"What is the chemical symbol for gold?","alternatives":[{"id":"alt_0","text":"Au"},{"id":"alt_1","text":"Ag"},{"id":"alt_2","text":"Pb"},{"id":"alt_3","text":"Fe"}],"correctAnswerId":"alt_0"},{"id":"q22","text":"Who discovered penicillin?","alternatives":[{"id":"alt_0","text":"Alexander Fleming"},{"id":"alt_1","text":"Marie Curie"},{"id":"alt_2","text":"Louis Pasteur"},{"id":"alt_3","text":"Isaac Newton"}],"correctAnswerId":"alt_0"},{"id":"q23","text":"Which city is known as the City of Love?","alternatives":[{"id":"alt_0","text":"Paris"},{"id":"alt_1","text":"Rome"},{"id":"alt_2","text":"Venice"},{"id":"alt_3","text":"New York"}],"correctAnswerId":"alt_0"},{"id":"q24","text":"What is the capital of Italy?","alternatives":[{"id":"alt_0","text":"Rome"},{"id":"alt_1","text":"Venice"},{"id":"alt_2","text":"Milan"},{"id":"alt_3","text":"Naples"}],"correctAnswerId":"alt_0"},{"id":"q25","text":"How many sides does a hexagon have?","alternatives":[{"id":"alt_0","text":"6"},{"id":"alt_1","text":"5"},{"id":"alt_2","text":"7"},{"id":"alt_3","text":"8"}],"correctAnswerId":"alt_0"},{"id":"q26","text":"What is the capital of Germany?","alternatives":[{"id":"alt_0","text":"Berlin"},{"id":"alt_1","text":"Munich"},{"id":"alt_2","text":"Frankfurt"},{"id":"alt_3","text":"Hamburg"}],"correctAnswerId":"alt_0"},{"id":"q27","text":"What is the main ingredient in sushi?","alternatives":[{"id":"alt_0","text":"Rice"},{"id":"alt_1","text":"Bread"},{"id":"alt_2","text":"Noodles"},{"id":"alt_3","text":"Potato"}],"correctAnswerId":"alt_0"},{"id":"q28","text":"Which is the smallest planet in our solar system?","alternatives":[{"id":"alt_0","text":"Mercury"},{"id":"alt_1","text":"Venus"},{"id":"alt_2","text":"Mars"},{"id":"alt_3","text":"Earth"}],"correctAnswerId":"alt_0"},{"id":"q29","text":"What is the capital of Canada?","alternatives":[{"id":"alt_0","text":"Ottawa"},{"id":"alt_1","text":"Toronto"},{"id":"alt_2","text":"Vancouver"},{"id":"alt_3","text":"Montreal"}],"correctAnswerId":"alt_0"},{"id":"q30","text":"Who painted the ceiling of the Sistine Chapel?","alternatives":[{"id":"alt_0","text":"Michelangelo"},{"id":"alt_1","text":"Leonardo da Vinci"},{"id":"alt_2","text":"Raphael"},{"id":"alt_3","text":"Donatello"}],"correctAnswerId":"alt_0"}]}');async function z(){return(function(t){let e=[...t];for(let t=e.length-1;t>0;t--){let a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}return e})(S.X).slice(0,5)}let k=async()=>{try{return(await (0,c.XB)(u)).user}catch(t){throw console.error("Error signing in:",t),t}},A=t=>(0,c.Aj)(u,t),C=(t,e)=>({accuracy:t?100:0,timeBonus:Math.floor(10*Math.max(0,30-e))});function Q(){let[t,e]=(0,r.useState)("home"),[a,n]=(0,r.useState)(!1),[s,o]=(0,r.useState)({quizId:"",questions:[],currentQuestionIndex:0,score:0,timeBasedScore:0,questionStartTime:0,timeLimit:30,questionScores:[],currentPlayer:{userId:"",nickname:"",score:0}});(0,r.useEffect)(()=>{let t=A(async t=>{t||await k()}),e=new URLSearchParams(window.location.search).get("join");return e&&d(e),()=>t()},[]);let c=async()=>{try{let t=await z(),a=await m(t),i=y();if(i&&await w(a,i)){o({...s,quizId:a,questions:t,currentQuestionIndex:0,score:0,timeBasedScore:0,questionStartTime:0,questionScores:[],currentPlayer:{...s.currentPlayer,nickname:i}}),e("question");return}o({...s,quizId:a,questions:t,currentQuestionIndex:0,score:0,timeBasedScore:0,questionStartTime:0,questionScores:[]}),e("nickname")}catch(t){console.error("Failed to create quiz:",t),alert("Failed to create quiz. Please try again.")}},d=async t=>{try{let a=await _(t);if(!a){alert("Quiz not found");return}let i=y();if(i&&await w(t,i)){o({...s,quizId:t,questions:a.questions,currentQuestionIndex:0,score:0,timeBasedScore:0,questionStartTime:0,questionScores:[],currentPlayer:{...s.currentPlayer,nickname:i}}),e("question");return}o({...s,quizId:t,questions:a.questions,currentQuestionIndex:0,score:0,timeBasedScore:0,questionStartTime:0,questionScores:[]}),e("nickname")}catch(t){console.error("Failed to join quiz:",t),alert("Failed to join quiz. Please try again.")}},x=async t=>{try{if(!await w(s.quizId,t)){alert("Failed to join quiz. The quiz might be full or no longer active.");return}v(t),o({...s,currentPlayer:{...s.currentPlayer,nickname:t}}),e("question")}catch(t){console.error("Failed to join quiz:",t),alert("Failed to join quiz. Please try again.")}},u=async(t,a)=>{let i=t===s.questions[s.currentQuestionIndex].correctAnswerId,r=C(i,a),n=r.accuracy+r.timeBonus,l=s.currentQuestionIndex+1,c=l>=s.questions.length,d={...s,score:s.score+(i?1:0),timeBasedScore:s.timeBasedScore+n,questionScores:[...s.questionScores,r],currentQuestionIndex:l};if(o(d),c)try{await b(s.quizId,d.timeBasedScore),e("results")}catch(t){console.error("Failed to submit score:",t),alert("Failed to submit score. Please try again.")}};return(0,i.jsxs)("div",{className:"min-h-screen bg-[#B5E0D6]",children:["home"===t&&(0,i.jsx)(l,{onNewQuiz:c,onJoinQuiz:()=>e("join")}),"join"===t&&(0,i.jsx)(p,{onJoinQuiz:d,onBack:()=>e("home")}),"nickname"===t&&(0,i.jsx)(q,{onSubmit:x,onBack:()=>e("home")}),"question"===t&&s.questions.length>0&&s.currentQuestionIndex<s.questions.length&&(0,i.jsx)(N,{question:s.questions[s.currentQuestionIndex],onAnswer:u,currentQuestionNumber:s.currentQuestionIndex+1,totalQuestions:s.questions.length,showEmoji:a,timeLimit:s.timeLimit}),"results"===t&&(0,i.jsx)(I,{quizId:s.quizId,score:s.timeBasedScore,totalQuestions:s.questions.length,onReturnHome:()=>{e("home"),n(!1),o({quizId:"",questions:[],currentQuestionIndex:0,score:0,timeBasedScore:0,questionStartTime:0,timeLimit:30,questionScores:[],currentPlayer:{userId:"",nickname:"",score:0}})},questionScores:s.questionScores,currentNickname:s.currentPlayer.nickname})]})}}},function(t){t.O(0,[982,358,580,971,69,744],function(){return t(t.s=8167)}),_N_E=t.O()}]);